
<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Weekend Flyer</title>

    <!-- Bootstrap core CSS -->
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="jumbotron_narrow.css" rel="stylesheet">
    
    <link rel="stylesheet" type="text/css" href="accordion_demo.css">

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script type="text/javascript" src="javascripts/accordion.js"></script>
    <script type="text/javascript" src="javascripts/javascript_commons.js"></script>
    <script type="text/javascript" src="javascripts/airport_list.js"></script>

    <!--<script src="https://apis.google.com/js/platform.js" async defer></script>-->
    <meta name="google-signin-client_id" content="552278765316-h7q89rqnrpe9ro728nrk0d2hhe4lih1s.apps.googleusercontent.com">
    
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!--<script type="text/javascript" src="https://cdn.emailjs.com/dist/email.min.js"></script>
    <script type="text/javascript">
       (function(){
          emailjs.init("user_P9ZRzstNVrsKAxg5cttib");
       })();
    </script>-->
    <script language="JavaScript">
            function onLoad() {
              gapi.load('auth2', function() {
                gapi.auth2.init();
              });
            }
            function signOut() {
                var auth2 = gapi.auth2.getAuthInstance();
                auth2.signOut().then(function () {
                  console.log('User signed out.');
                });
                window.location = "http://andrewgoldstein.github.io/login.html" ;
            }
              
            function onSignIn(googleUser) {
              try {
                    console.log(googleUser);
              }
              catch(err) {
                    window.location = "http://andrewgoldstein.github.io/login.html" ;
              }
            }
                    var User = "current_user";
                    User = getCookie("current_user");
                    console.log(User);
                    if (User == "current_user") 
                      {window.location = "http://andrewgoldstein.github.io/login.html"}
    </script>

  </head>


  <body>

    <div class="container">
      <div class="header clearfix">
        <nav>
          <ul class="nav nav-pills pull-right">
            <li role="presentation" class="active"><a href="#">Home</a></li>
            <li role="presentation"><a href="about.html">About</a></li>
            <li role="presentation"><a href="settings.html">Your Settings</a></li>
            <li role="presentation"><a href="#" onclick="signOut();">Sign out</a></li>
          </ul>
        </nav>
        <h3 class="text-muted">Weekend Flyer</h3>
      </div>

      <div class="jumbotron">


        <h2>What are you doing this weekend?</h2>
        <p class="lead">Take a new adventure, visit a friend, hop on a romantic getaway. Spontaneity has reached new heights. Search last minute flight deals for this coming weekend!</p>


        <p>

                          <div class="main">
                            <div class="accordion">

                              <div class="accordion-section">
                                <a id="origin" class="accordion-section-title" href="#accordion-4">Select your Home City</a>
                                <div id="accordion-4" class="accordion-section-content">
                                    <select id="item1" onChange='passCookie("origin", this.value)'>
                                      <option id="home_airport" value="select">Timbuktu</option>
                                            <script> 
                                            function haversineDistance(lat1,lon1, lat2,lon2) {
											  function toRad(x) {
											    return x * Math.PI / 180;
											  }

											  var R = 6371; // km

											  var x1 = lat2 - lat1;
											  var dLat = toRad(x1);
											  var x2 = lon2 - lon1;
											  var dLon = toRad(x2)
											  var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
											    Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) *
											    Math.sin(dLon / 2) * Math.sin(dLon / 2);
											  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
											  var d = R * c;
											  return d;
											} 
                                            function closest_airport()  {
											    var lat = 40;
											    var lon = -74;
											    var home_airport = '';
											    var dist = 1000000;
											    for (i = 0; i < airports.length; i++) {
											      distance_from_airport = haversineDistance(airports[i].lat, airports[i].lon, lat, lon);
											      if (distance_from_airport < dist) {
											        dist = distance_from_airport;
											        home_airport = airports[i].city
											      }
											    }
											    if (home_airport != ''){
											      console.log(home_airport)
											      return home_airport
											    }
											    else {
											      return false
											    }
  											}
  											document.getElementById('home_airport').innerHTML = closest_airport();
  											defineCookie("origin", this.value);
  											 </script>

                                      <option value="San Francisco">San Francisco</option>
                                      <option value="Seattle">Seattle</option>
                                      <option value="New York City">New York City</option>
                                      <option value="Boston">Boston</option>
                                    </select>
                                </div><!--end .accordion-section-content-->
                              </div><!--end .accordion-section-->
                              <p line-height= ".3em"> </p>

                              <div class="accordion-section">
                                <a id="destination" class="accordion-section-title" href="#accordion-5">Select your Destination</a>
                                <div id="accordion-5" class="accordion-section-content">
                                  <select id="item2" onChange='passCookie("destination", this.value)'>
                                    <option value="select">Select Destination</option>
                                    <option value="San Francisco">San Francisco</option>
                                    <option value="Seattle">Seattle</option>
                                    <option value="New York City">New York</option>
                                    <option value="Boston">Boston</option>
                                    <option value="Adventure">Surprise Me!</option>
                                  </select>
                                </div><!--end .accordion-section-content-->
                              </div><!--end .accordion-section-->
                            
                            </div><!--end .accordion-->
                          </div>

            <br>
            <a class="btn btn-lg btn-success" href="flights.html" role="button">Let's Jet!</a>
        </p>
      </div>

      <div class="row marketing">
        <div class="col-lg-6">
          <h4>Non-Stop Flights</h4>
          <p>The Weekend Flyer doesn't have time for layovers and missed connections. Wheels up, Wheels down.</p>

          <h4>Roundtrip</h4>
          <p>It's good to go and it's good to come back. Our fares include both legs of your flight.</p>

          <h4>First Come, First Serve</h4>
          <p>There's a limited set of tickets available for any given flight. The boarding door may close at any time.</p>
        </div>

        <div class="col-lg-6">
          <h4>(Long) Weekend Travel Only</h4>
          <p>The Weekend Flyer is not a substitute for last minute weekday travel bookings, we're just giving the common man a shot at weekend greatness.</p>

          <h4>Limited Set of Airports</h4>
          <p>We're starting with flights to Seattle, New York, San Francisco, Boston, and Las Vegas. We'll expand soon, don't worry.</p>

          <h4>Low Fare Guarantee</h4>
          <p>The price we offer you is the lowest price that this flight has ever been offered for by the airline. Promise.</p>
        </div>
      </div>

      <footer class="footer">
        <p>&copy; 2015 Weekend Flyer, Inc.</p>
      </footer>

    </div> <!-- /container -->
  
  <script src="https://apis.google.com/js/platform.js?onload=onLoad" async defer></script>

  </body>
</html>
